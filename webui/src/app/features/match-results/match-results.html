<div class="my-4">
  <a class="text-decoration-none" href="/">Â« Back to Main Dashboard</a>
</div>

<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center">
    <div class="form-check-inline">
      <label class="form-check-label">
        <input class="form-check-input" type="checkbox"> Condensed
      </label>
      <label class="form-check-label ms-2">
        <input class="form-check-input" type="checkbox"> Keep Background on Print
      </label>
    </div>
    <button class="print-btn" title="Print">
      <i class="bi bi-printer"></i>
    </button>
  </div>

  <div class="text-center my-3">
    <h2 class="fw-semibold">Match Results</h2>
  </div>

  @if (loading()) {
    <div class="d-flex justify-content-center my-5">
      <div class="spinner-border text-primary" role="status"></div>
    </div>
  }

  @if (error()) {
    <div class="alert alert-warning text-center">{{ error() }}</div>
  }

  @if (!loading() && !error() && matches().length) {
    <table class="table table-bordered text-center mt-3">
      <thead class="table-light">
      <tr>
        <th scope="col">Match</th>
        <th scope="col">Result</th>
        <th scope="col">Red</th>
        <th scope="col">Blue</th>
        <th scope="col">Score Breakdown</th>
        <th scope="col">History</th>
      </tr>
      </thead>
      <tbody>
        @for (match of matches(); track match.match.id) {
          <tr [class.table-secondary]="isUnplayed(match)">
            <td>Q{{ match.match.matchNumber }}</td>
            <td>
              @if (isUnplayed(match)) {
                Unplayed
              } @else {
                <div [class.text-white]="formatResult(match).endsWith('R') || formatResult(match).endsWith('B')"
                     [class.bg-danger]="formatResult(match).endsWith('R')"
                     [class.bg-primary]="formatResult(match).endsWith('B')"
                     class="py-1 px-2 rounded">
                  {{ formatResult(match) }}
                </div>
              }
            </td>
            <td>{{ getTeamIds(match.redTeams) }}</td>
            <td>{{ getTeamIds(match.blueTeams) }}</td>
            <td>
              <a href="#" class="text-decoration-none">Scoresheet</a> |
              <a href="#" class="text-danger text-decoration-none">Red</a> |
              <a href="#" class="text-primary text-decoration-none">Blue</a>
            </td>
            <td>
              <a href="#" class="text-decoration-none">View Match History</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <p class="text-center text-muted">No match results available.</p>
  }
</div>
