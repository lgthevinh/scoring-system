
<div class="broadcast-container">
  <header class="broadcast-header">
    <div *ngIf="currentMatch() as matchDetail; else loadingHeader">
      <h1>{{ matchDetail.match.matchCode }}</h1>
      <span class="match-time">Starts: {{ matchDetail.match.matchStartTime | date:'shortTime' }}</span>
    </div>
    <ng-template #loadingHeader>
      <h1>--</h1>
      <span class="match-time">Loading...</span>
    </ng-template>
  </header>

  <main class="broadcast-main">
    <!-- Red Alliance Panel -->
    <div class="alliance-panel red-alliance">
      <div class="team-info">
        <h2 *ngFor="let team of currentMatch()?.redTeams; else noTeams">
          {{ team.teamId }} - {{ team.teamName }}
        </h2>
        <ng-template #noTeams><h2>---</h2></ng-template>
      </div>
      <div class="score-display">
        <span>{{ redScore()?.totalScore ?? '--' }}</span>
      </div>
    </div>

    <!-- Timer Panel -->
    <div class="timer-panel">
      <div class="timer-display">{{ formattedTime() }}</div>
      <!-- Optional: Display match period/state if available -->
      <!-- <div class="timer-state">{{ timer()?.state }} - {{ timer()?.period }}</div> -->
    </div>

    <!-- Blue Alliance Panel -->
    <div class="alliance-panel blue-alliance">
      <div class="score-display">
        <span>{{ blueScore()?.totalScore ?? '--' }}</span>
      </div>
      <div class="team-info">
        <h2 *ngFor="let team of currentMatch()?.blueTeams; else noTeams">
          {{ team.teamId }} - {{ team.teamName }}
        </h2>
        <ng-template #noTeams><h2>---</h2></ng-template>
      </div>
    </div>
  </main>

  <footer class="broadcast-footer">
    <div class="status-pill red-status">{{ getStatusText(redScore()?.status ?? 0) }}</div>
    <div class="event-title">Robotics Competition Live</div>
    <div class="status-pill blue-status">{{ getStatusText(blueScore()?.status ?? 0) }}</div>
  </footer>

  <!-- Loading/Error Overlay -->
  <div *ngIf="isLoading()" class="loading-overlay">Loading Match Data...</div>
  <div *ngIf="errorMessage()" class="error-overlay">{{ errorMessage() }}</div>
</div>
